---
// src/components/Header.astro
---
<header class="
    fixed                  /* Fijo en la pantalla */
    top-0                  /* Anclado arriba */
    left-0                 /* Ancla a la izquierda para que vaya de borde a borde */
    w-full                 /* Ocupa todo el ancho */
    z-50                   /* Asegura que el header esté por encima de todo */
    py-4                   /* Tu padding vertical actual */
    
    bg-black/30            
    backdrop-blur-sm       
    transition-colors      
">
    <div class="px-6 md:px-22 flex"> 
        <nav class="flex items-center justify-between flex-grow"> 
            <a href="/" class="flex items-center space-x-0 group" aria-label="Ir a la página de inicio de Laia">
                <img
                    src="/IconoLaiaPNG.png"
                    alt="Laia Logo"
                    class="w-icon-w h-icon-h inline-block"
                    aria-label="Logo de la aplicación Laia"
                >
                <span class="font-dm-serif text-laia-text text-text-white-light opacity-80 group-hover:opacity-100 transition-opacity">
                    Laia
                </span>
            </a>

            <div class="flex items-center gap-x-5 md:gap-x-5 flex-wrap justify-end">
                <a href="mailto:info.getlaia@gmail.com" class="font-sans text-ayuda-text text-text-white-light opacity-80 hover:opacity-100 transition-opacity">
                    Ayuda
                </a>
                <div class="h-8 w-px bg-text-white-light opacity-50"></div>
                <button 
                    id="downloadButton" 
                    class="
                        bg-button-purple
                        w-btn-w /* Uses new clamped button width */
                        h-btn-h
                        rounded-[15px]
                        flex items-center justify-center text-center
                        focus:outline-none focus:ring-2 focus:ring-button-purple focus:ring-opacity-75
                        font-sans text-descargar-text text-text-white-light opacity-90
                    "
                >
                    Descargar
                </button>
            </div>
        </nav>
    </div>

    {/* ESTE ES EL LUGAR CORRECTO PARA EL SCRIPT:
        Justo antes del cierre de la etiqueta <header>, pero aún dentro de ella. */}
    <script is:inline>
        const downloadButton = document.getElementById('downloadButton');

        if (downloadButton) {
            downloadButton.addEventListener('click', () => {
                const userAgent = navigator.userAgent || navigator.vendor || window.opera;

                // --- ¡¡¡MUY IMPORTANTE!!! REEMPLAZA ESTAS URLS CON LAS REALES DE TU APP ---
                const iOS_APP_STORE_URL = 'https://apps.apple.com/app/id_TU_ID_DE_APP_AQUI'; 
                const ANDROID_PLAY_STORE_URL = 'https://play.google.com/store/apps/details?id=com.tuempresa.tuapp_aqui';
                const FALLBACK_URL = 'https://tuweb.com/descargar'; // Opcional: URL para otros SO (escritorio, etc.)

                if (/iPad|iPhone|iPod/.test(userAgent) && !window.MSStream) {
                    // Es un dispositivo iOS
                    window.location.href = iOS_APP_STORE_URL;
                } else if (/android/i.test(userAgent)) {
                    // Es un dispositivo Android
                    window.location.href = ANDROID_PLAY_STORE_URL;
                } else {
                    // Otros sistemas operativos (Windows, macOS, Linux, etc.)
                    window.location.href = FALLBACK_URL; // Si no quieres redireccionar, elimina esta línea
                }
            });
        }
    </script>
</header> {/* <-- ESTA ES LA ETIQUETA QUE DABA ERROR SI EL SCRIPT ESTABA DESPUÉS */}